"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
var express_1 = __importDefault(require("express"));
var celebrate_1 = require("celebrate");
var history_repository_1 = require("../../customer-pages/service-history/history.repository");
var history_model_1 = require("../../customer-pages/service-history/history.model");
var history_service_1 = require("../../customer-pages/service-history/history.service");
var history_controller_1 = require("../../customer-pages/service-history/history.controller");
var login_repository_1 = require("../../sign-up/login/login.repository");
var login_service_1 = require("../../sign-up/login/login.service");
var login_controller_1 = require("../../sign-up/login/login.controller");
var ratingAdd = history_model_1.HistorySchema.ratingAdd;
var historyRouter = express_1.default.Router();
var loginRepo = new login_repository_1.LogInRepository();
var loginService = new login_service_1.LogInService(loginRepo);
var loginController = new login_controller_1.LogInController(loginService);
var repo = new history_repository_1.HistoryRepository();
var service = new history_service_1.HistoryService(repo);
var controller = new history_controller_1.HistoryController(service);
historyRouter.get('/get-past-service-request', loginController.validateToken, controller.history);
historyRouter.get('/get-past-service-request/:ServiceId', loginController.validateToken, controller.getServiceById);
historyRouter.post('/give-ratings/:ServiceRequestId', loginController.validateToken, (0, celebrate_1.celebrate)(ratingAdd), controller.giveRatings);
historyRouter.get('/export', loginController.validateToken, controller.export);
module.exports = historyRouter;
